Node的污点  
===
- NoSchedule:不能容忍此污点的新Pod对象不可调度至当前节点,属于强制型约束关系,节点上现存的 Pod 对象不受影响。

- PreferNoSchedule:NoSchedule的柔性约束版本,即不能容忍此污点的新 Pod 对象尽量不要调度至当前节点,不过无其他节点可供调度时也允许接受相应的Pod对象.节点上现存的Pod对象不受影响。

- NoExecute:不能容忍此污点的新Pod对象不可调度至当前节点,属于强制型约束关系,而且节点上现存的Pod对象因节点污点变动或Pod容忍度变动而不再满足匹配规则时,Pod对象将被驱逐。 

- 一个节点可以使用配置使用多个污点，一个pod对象也可以有多个容忍度

kubernetes内建使用的污点  
```
node.kubernetes.io/not-ready:    节点进入"NotReady"状态时被自动添加的污点
node.alpha.kubernetes.io/unreachable:   节点进入"NotReachable"状态时被自动添加的污点。 
node.kubernetes.io/out-of-disk:     节点进入"OutOfDisk"状态时被自动添加的污点
node.kubernetes.io/memory-pressure:    节点内存资源面临压力
node.kubernetes.io/ disk-pressure:   节点磁盘资源面临压力
node.kubernetes.io/network-unavailable:    节点网络不可用
node.cloudprovider.kubernetes.io/uninitialized:   kubelet由外部的云环境程序启动时,它将自动为节点添加此污点,待到云控制器管理器中的控制器初始化此节点时再将 其删除。 
```  

1、为node设置taint
语法  
#kubectl taint nodes <node name> <key>=<value> : <effect>    #key和value可以根据自己需求任意定义  
```
# kubectl taint nodes node1 node-type=production:NoSchedule
# kubectl taint nodes node2 node-role=admin:PreferNoSchedule
# kubectl taint nodes node3 node-storage=ssd:NoExecute
```  

2、删除上面的taint  
语法：  
#kubectl taint nodes <node-name> <key>{ :<effect>}-  
```
# kubectl taint nodes node1 node-type:NoSchedule-
# kubectl taint nodes node2 node-role:PreferNoSchedule-
# kubectl taint nodes node3 node-storage:NoExecute-
```  

3、删除指定键名的所有污点  
``` # kubectl taint nodes node1node-type- ```  

4、删除节点上全部污点信息  
``` # kubectl patch nodes node1 -p '{"spec":{"taints":[]}}' ```  


Pod对象的容忍度  
===
```
tolerations:                                                 #spec字段下的容忍度配置              
- key: "node-type"                                     #可以容忍的自定义的key          
  operator: "Equal"                                     #污点信息完全匹配的等值
  value: "production"                                  #可以容忍的自定义的value
  effect: "NoSchedule"                                #容忍的污点类型
- key: "node-role"
  operator: "Exists"                                      #判断污点信息存在性的匹配方式
  value: "admin"
  effect: "PreferNoSchedule"
- key: "node.alpha.kubernetes.io/unreachable"
  operator: "Exists"
  effect: "NoExecute"
  tolerationSeconds: 6000                          #定义延迟驱逐当前Pod对象的时长
```  







